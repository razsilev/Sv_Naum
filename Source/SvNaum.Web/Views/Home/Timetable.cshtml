@model IEnumerable<SvNaum.Models.Ministration>

@{
    ViewBag.Title = "Служение";
}

<h2>Служение!</h2>
@if (this.User.Identity.IsAuthenticated)
{
    @Html.ActionLink("Create new ministration", "TimetableAdd", "Admin")
}
<br />
<br />

@if (Model != null && Model.Count() > 0)
{
    foreach (var item in Model)
    {
        <div>
            <h2>@item.Title</h2>
            <label>Date:</label>
            <span>@item.Date.ToLocalTime().GetDateTimeFormats('D')[1]</span>
            <br />
            <label>Time:</label>
            @{
        string minute = item.Date.ToLocalTime().Minute.ToString();

        if (minute.Length == 1)
        {
            minute = "0" + minute;
        }
            }

            <span>@item.Date.ToLocalTime().Hour:@minute</span>
            <br />
            <label>Day of week:</label>
            <em>@item.DayName</em>
            <br />
            <label>Description:</label>
            <p>@item.Description</p>

            @if (this.User.Identity.IsAuthenticated)
            {
                @Html.ActionLink("Delete", "DeleteMinistration", "Admin", new { id = item.Id }, null)
                <br />
                @Html.ActionLink("Edit", "MinistrationEdit", "Admin", new { id = item.Id }, null)
            }
        </div>
        <p>------------------------------------------</p>
    }
}
else
{
    <h3>There is no ministration!</h3>
}

